(()=>{"use strict";var e={300:(e,t)=>{var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(300),t=n.n(e);const o="localhost",r=document.getElementById("repo_list"),s=document.getElementById("create_repo"),i=(document.getElementById("remove_repo"),document.getElementById("list_repos")),l=document.getElementById("repo_input"),c=document.getElementById("output-msg"),u=document.getElementById("output-link"),d=document.getElementById("ssh_pub");document.getElementById("submit_key");let a=null;function p(e){return e.split(".git")[0]}function m(e){const t=document.createElement("option");(e=p(e)).length&&(e+=".git"),t.value=e,t.text=e,r.appendChild(t)}function f(e){c.innerHTML=e,c.setAttribute("class","text-success")}function h(e){c.innerHTML=e,c.setAttribute("class","text-fail")}s.onclick=()=>{let e=l.value;if(e.length){e=p(e);const n={git_name:e};t()(`http://${o}:3000/create_repository`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.err?h(e.err):(i.click(),f(e.message),a=e.message)})).catch((e=>{h(e)}))}else h("Repository Name must not be empty!")},i.onclick=()=>{console.log(`DEBUG: IP(${o})`),t()(`http://${o}:3000/list_repositories`).then((e=>e.json())).then((e=>{e.err?h(e.err):(a?(f(a),a=null):f("List Updated!"),function(e){if(!e)return;const t=e.split("\n");t.sort(),function(){for(;r.hasChildNodes();)r.removeChild(r.lastChild)}();for(const e of t)m(e)}(e.message))})).catch((e=>{h(e)}))},r.onclick=()=>{const e=r[r.selectedIndex].value;var t;t=e,u.innerHTML=t.length?"ssh://git@localhost/repos/"+t:"",l.value=p(e)},submit_key.onclick=()=>{const e={key:d.value};t()(`http://${o}:3000/push_key`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{f("SSH Key Submitted!"),d.value=""})).catch((e=>h(e)))},i.click()})()})();